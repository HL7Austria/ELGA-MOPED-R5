{% include styleheader.md %}

## Anwendungsfall 10: Klassenwechsel

### Betroffene Akteure

| Akteur            |  |
|-------------------|--------------:|
| KH (Krankenhaus)  |      ✅       |
| LGF (Landesgesundheitsfonds) | ❌ |
| SV (Sozialversicherung)      | ✅ |
| Bund              |            ❌ |

### Betroffene Behandlungsarten

| Behandlungsart|  |
|-----------|----:|
| Ambulant  |  ❌ |
| Stationär |  ✅ |


### Beschreibung
Die Klasse des Aufenthalts (Allgemeine Klasse/Sonderklasse) wird mit der VAE an die SV übermittelt. Im Fall eines Klassenwechsels während des Aufenthalts, muss diese Information der SV mitgeteilt werden, da unter anderem die Verpflegskostenbeitragsbefreiung (VKBEFR) davon abhängt. Der Wechsel ist zu jedem Zeitpunkt in beide Richtungen möglich. Um die Zeitintervalle der jeweiligen Klassen nachvollziehen zu können, wird von Seite des KH das Zeitintervall für die jeweiligen Klassen und von Seite der SV das Zeitintervall der VKBEFR festgehalten.


### Beispiel
Patient liegt zuerst auf der Allgemeinen Klasse (A) und wird dann auf die Sonderklasse (S) verlegt. Zuerst liegt keine Verpflegskostenbeitragsbefreieung vor (VKBEFR = N). Aufgrund der Verlegung auf die  Sonderklasse gilt ab dem Zeitpunkt des Klassenwechsels eine Befreiung der Verpflegskosten (S – Befreiung aufgrund der Sonderklasse).

### Technische Hinweise
Da es sich hierbei um eine Änderung der VAE für den selben Zeitraum handelt, wird beide male das Profil VAERequestInitial verwendet, was zu einer automatischen Stornierung des vorherigen VAERequest führt.

### Ablauf 
<pre class="mermaid">
    ---
    config:
      theme: 'base'
      themeVariables:
        primaryColor: '#dbdbdb'         
        actorBorder: '#666'
        noteBkgColor: '#f4f4f4'
        noteBorderColor: '#555'
    ---
    sequenceDiagram
    autonumber
    box rgb(245, 229, 153)
    actor KHA as KH A
    end
    box rgb(197, 247, 186)
    participant MP as Moped
    end
    box rgb(186, 196, 247)
    actor SV as SV 
    end
    box rgb(247, 208, 186)
    actor LGF as LGF 
    end
    box rgb(252, 179, 179) 
    actor Bund as Bund 
    end

    KHA->>MP: $anfragen
    Note over KHA: Initiale Anfrage:<br/>VAERequestInitial 1<br/> KLAS = A + Zeitintervall: ab 1.1.
    SV-->>MP: $antworten
    Note over SV: VAEResponse 1<br/>VKBEFR = N + Zeitintervall: ab 1.1.
    KHA->>MP: $anfragen
    Note over KHA: Klassenwechsel: <br/> VAERequestInitial 2<br/> KLAS = A + Zeitintervall: von 1.1. bis 3.1.<br/> KLAS = S + Zeitintervall: ab 3.1. 
    SV-->>MP: $antworten
    Note over SV: VAEResponse 2<br/>VKBEFR = N + Zeitintervall: von 1.1. bis 3.1.<br/>VKBEFR = S + Zeitintervall: ab 3.1.
    

</pre>

### Relevante Profile
- [VAERequestInitial](StructureDefinition-MopedVAERequestInitial.html)
- [VAEResponse](StructureDefinition-MopedVAEResponse.html)
- [$anfragen Bundle](StructureDefinition-MopedAnfragenBundleKH.html)
- [$antworten Bundle](StructureDefinition-MopedAntwortenBundleSV.html)

### Relevante Invarianten

### Mögliche Notifications

#### Tabellarische Übersicht

<table class="table-responsive">
  <tr>
    <th>Titel</th>
    <th>Beschreibung</th>
    <th>Trigger Ressource</th>
    <th>Interaktion</th>
    <th>Auslöser</th>
    <th>Empfänger</th>
    <th>Beschreibung zusätzlicher Bedingungen</th>
    <th>Relevantes Feld</th>
    <th>Bedingung</th>
  </tr>
  <tr>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
</table>